# Affine Space

- [Affine Space](#affine-space)
  - [仿射空间的定义](#仿射空间的定义)
  - [仿射变换的定义](#仿射变换的定义)

## 仿射空间的定义

一个**仿射空间**通常被定义为一个三元组 $(\mathcal{A}, V, \phi)$，其中：

1. $\mathcal{A}$ 是一个非空集合，其元素称为**点 (points)**。
2. $V$ 是一个在某个域 $F$ 上的**线性空间 (vector space)**（也称为向量空间）。这个线性空间 $V$ 被称为仿射空间 $\mathcal{A}$ 的**相伴线性空间**或**方向空间**。
3. $\phi$ 是一个映射（或称为作用、运算），称为**平移作用**或**向量加法到点**：

$$ \phi: \mathcal{A} \times V \to \mathcal{A} $$

我们通常将 $\phi(P, \mathbf{v})$ 简记为 $P + \mathbf{v}$。这个映射表示将点 $P \in \mathcal{A}$ 沿着向量 $\mathbf{v} \in V$ 平移得到一个新的点 $P + \mathbf{v} \in \mathcal{A}$。

这个映射 $\phi$ (或简写的 $+$ 运算) 必须满足以下两个公理：

*   **公理 1 (平移的结合性 / 向量加法的兼容性):**
    对于任意点 $P \in \mathcal{A}$ 以及任意向量 $\mathbf{u}, \mathbf{v} \in V$，都有：

    $$ (P + \mathbf{u}) + \mathbf{v} = P + (\mathbf{u} + \mathbf{v}) $$

    这意味着先按 $\mathbf{u}$ 平移再按 $\mathbf{v}$ 平移，其效果等同于直接按向量和 $\mathbf{u} + \mathbf{v}$ 平移。

*   **公理 2 (自由且传递的作用 / 向量的唯一性):**
    对于任意两个点 $P, Q \in \mathcal{A}$，存在一个**唯一的**向量 $\mathbf{v} \in V$ 使得：

    $$ Q = P + \mathbf{v} $$

    这个唯一的向量通常被记为 $\vec{PQ}$ 或者 $Q - P$。这意味着从任何点出发，都可以通过唯一的向量到达任何其他点。

**从公理可以推导出的性质和等价定义：**

1.  **零向量的作用：**
    由公理2，对于任意点 $P \in \mathcal{A}$，存在唯一的向量 $\mathbf{v}$ 使得 $P = P + \mathbf{v}$。这个唯一的向量必然是线性空间 $V$ 中的零向量 $\mathbf{0}_V$。所以：

    $$ P + \mathbf{0}_V = P $$

    (这个有时也被列为第三个公理，但它可以从公理2推导出来，或者说公理2的表述已经蕴含了它。)

2.  **定义点之间的差向量：**
    公理2直接允许我们定义一个从点对到向量的映射：

    $$ \sigma: \mathcal{A} \times \mathcal{A} \to V $$

    使得 $\sigma(P, Q) = \vec{PQ}$，其中 $\vec{PQ}$ 是满足 $Q = P + \vec{PQ}$ 的唯一向量。
    这个 $\sigma$ 映射（或 $\vec{PQ}$ 的概念）满足以下性质，有时这些性质被用来作为仿射空间的等价定义：
    *   对于任意点 $P \in \mathcal{A}$，$\vec{PP} = \mathbf{0}_V$。
    *   **查尔斯关系 (Chasles' relation) / 向量加法法则：** 对于任意点 $P, Q, R \in \mathcal{A}$，有 $\vec{PQ} + \vec{QR} = \vec{PR}$。 (这可以从 $Q = P + \vec{PQ}$ 和 $R = Q + \vec{QR} = (P + \vec{PQ}) + \vec{QR} = P + (\vec{PQ} + \vec{QR})$ 以及 $R = P + \vec{PR}$ 和向量的唯一性得到。)

**总结关键点：**

*   **点集 $\mathcal{A}$:** 几何对象的位置。
*   **向量空间 $V$:** 描述位移、方向和大小。
*   **平移作用 $P + \mathbf{v}$:** 将向量“作用”于点上，实现点的移动。
*   **核心特征：** 没有特殊的“原点”。任意两点间的关系由相伴向量空间中的一个唯一向量确定。

**例子：**

*   我们熟悉的欧几里得空间 $\mathbb{E}^n$ (例如平面 $\mathbb{E}^2$ 或三维空间 $\mathbb{E}^3$) 是一个仿射空间。
    *   点集 $\mathcal{A}$ 是 $\mathbb{R}^n$ 中的所有n元组。
    *   相伴线性空间 $V$ 是 $\mathbb{R}^n$ (作为向量空间)。
    *   平移作用 $P + \mathbf{v}$ 就是坐标对应相加：如果 $P=(p_1, \dots, p_n)$ 且 $\mathbf{v}=(v_1, \dots, v_n)$，则 $P+\mathbf{v} = (p_1+v_1, \dots, p_n+v_n)$。
    *   两点 $P=(p_1, \dots, p_n)$ 和 $Q=(q_1, \dots, q_n)$ 之间的向量是 $\vec{PQ} = Q - P = (q_1-p_1, \dots, q_n-p_n)$。

*   任何线性空间 $V$ 自身也可以被视为一个仿射空间，其中点集 $\mathcal{A} = V$，相伴线性空间也是 $V$，平移作用就是 $V$ 中的向量加法。在这种情况下，零向量 $\mathbf{0}_V$ 就充当了一个（非特权的）原点。

仿射空间的定义突出了几何空间中“位置”和“位移”分离的思想，这在许多几何和物理应用中非常有用。

## 仿射变换的定义

一个**仿射变换 (Affine Transformation)** 是从一个仿射空间到另一个（或同一个）仿射空间的映射，它保持了仿射结构，即保持了点的共线性、平行性和仿射组合。

更具体地说，设有：
*   $(\mathcal{A}_1, V_1, +_1)$ 是一个仿射空间，点集为 $\mathcal{A}_1$，相伴的线性空间为 $V_1$ (在域 $F$ 上)。
*   $(\mathcal{A}_2, V_2, +_2)$ 是另一个仿射空间，点集为 $\mathcal{A}_2$，相伴的线性空间为 $V_2$ (也在同一个域 $F$上)。

一个映射 $T: \mathcal{A}_1 \to \mathcal{A}_2$ 被称为一个**仿射变换**，如果存在一个**线性变换** $L: V_1 \to V_2$ (称为 $T$ 的**相伴线性变换**或**线性部分**)，使得满足以下等价条件之一：

**定义方式 1 (基于点和向量的加法)：**
对于 $\mathcal{A}_1$ 中的任意点 $P \in \mathcal{A}_1$ 和任意向量 $\mathbf{v} \in V_1$，都有：

$$ T(P +_1 \mathbf{v}) = T(P) +_2 L(\mathbf{v}) $$

这条性质的含义是：将点 $P$ 沿向量 $\mathbf{v}$ 平移得到 $P +_1 \mathbf{v}$，然后对 $P +_1 \mathbf{v}$ 进行仿射变换 $T$，其结果与先对点 $P$ 进行仿射变换得到 $T(P)$，然后将 $T(P)$ 沿向量 $L(\mathbf{v})$ (即原向量 $\mathbf{v}$ 经过线性变换 $L$ 后的像) 平移得到的结果相同。

**定义方式 2 (基于两点间的差向量)：**
对于 $\mathcal{A}_1$ 中的任意两个点 $P, Q \in \mathcal{A}_1$，令 $\vec{PQ}$ 表示从点 $P$ 指向点 $Q$ 的唯一向量 (即 $Q = P +_1 \vec{PQ}$)。则 $T$ 是仿射变换，如果存在线性变换$L: V_1 \to V_2$ 使得：

$$ \vec{T(P)T(Q)} = L(\vec{PQ}) $$

这条性质的含义是：变换后两点 $T(P)$ 和 $T(Q)$ 之间的差向量，等于原两点 $P$ 和 $Q$ 之间的差向量经过线性变换 $L$ 作用后的结果。

**定义方式 3 (基于仿射组合的保持)：**
一个映射 $T: \mathcal{A}_1 \to \mathcal{A}_2$ 是仿射变换，当且仅当它保持仿射组合。也就是说，对于任意一组点 $P_0, P_1, \ldots, P_k \in \mathcal{A}_1$ 和一组标量 $\lambda_0, \lambda_1, \ldots, \lambda_k \in F$ 使得 $\sum_{i=0}^k \lambda_i = 1$，如果点 $P = \sum_{i=0}^k \lambda_i P_i$ 是这些点的仿射组合 (这需要先在仿射空间中选择一个原点来定义，或者更一般地，通过 $P = P_0 + \sum_{i=1}^k \lambda_i \vec{P_0P_i}$ 来定义)，那么：

$$ T\left(\sum_{i=0}^k \lambda_i P_i\right) = \sum_{i=0}^k \lambda_i T(P_i) $$

这表明仿射变换保持了点之间的相对位置关系和比例。例如，它将线段的中点映射为像线段的中点。

**重要推论和表示：**

如果我们在 $\mathcal{A}_1$ 中选取一个原点 $O_1$ 并在 $\mathcal{A}_2$ 中选取一个原点 $O_2$，那么：
*   $\mathcal{A}_1$ 中的任意点 $P$ 可以用从 $O_1$ 出发的向量 $\mathbf{x} = \vec{O_1P}$ 来表示。
*   $\mathcal{A}_2$ 中的任意点 $Q$ 可以用从 $O_2$ 出发的向量 $\mathbf{y} = \vec{O_2Q}$ 来表示。

在这种情况下，仿射变换 $T$ 可以表示为：

$$ \mathbf{y} = L\mathbf{x} + \mathbf{b} $$

其中：
*   $\mathbf{x}$ 是代表输入点 $P$ 的向量。
*   $\mathbf{y}$ 是代表输出点 $T(P)$ 的向量。
*   $L$ 是相伴的线性变换 (通常用矩阵表示)。
*   $\mathbf{b} = \vec{O_2T(O_1)}$ 是一个平移向量，表示 $\mathcal{A}_1$ 的原点 $O_1$ 经过变换 $T$ 后的像 $T(O_1)$ 相对于 $\mathcal{A}_2$ 的原点 $O_2$ 的位置向量。

所以，一个仿射变换通常被理解为**一个线性变换紧跟着一个平移**。

**总结：**
仿射变换的核心是它将点映射到点，并且这种映射方式是通过一个底层的线性变换来处理方向和位移，同时允许一个整体的平移。它保持了仿射空间的基本几何特性，如共线性、平行性以及点在线段上的比例关系。
